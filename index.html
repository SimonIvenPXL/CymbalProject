<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zildjian Cymbal Guide</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<img src="./resources/Zildjan_Banner_6.jpg" alt="Zildjian Cymbal Guide" style="display: block; margin: 0 auto; width: 60%;">
<br/>
<div id="encapsulated">
    <br/>
    <a href="https://hogeschoolpxl-my.sharepoint.com/:b:/g/personal/12101779_student_pxl_be/EUfr7EEerbFCmiNvOq8StGsBVx2pyNnoOOXYDWdWYV879w?e=shFTt5"
       target="_blank"><button id="goToPageBtn">Klik hier voor de cymbal guide</button></a>

<button id="toggleFiltersBtn">Show Filters</button>
<!-- Sliders container -->
    <div id="sliders" style="display: none;">
        <h3 style="text-align: center">DISCLAIMER: ALS EEN FILTER OP 0 STAAT MAG DEZE GENEGEERD WORDEN. HET IS BEST OM TE BEGINNEN MET 2-3 FILTERS,
            OM DAN NAAR MEER FILTERS UIT TE BREIDEN ALS HET AANTAL OPTIES TE GROOT IS.</h3>
        <div style="float: left; margin-right: 50px">
            <div class="slider-container">
                <label for="brightness">Brightness:</label>
                <input type="range" id="brightness" min="0" max="10" value="0">
                <p>Het karakter van de cymbaal, van laag in pitch en donker tot hoog in pitch en bright</p>
            </div>
            <div class="slider-container">
                <label for="dryness">Dryness:</label>
                <input type="range" id="dryness" min="0" max="10" value="0">
                <p>Hoe droger de cymbaal, hoe minder bovetonen (hangt vaak samen met sustain)</p>
            </div>
            <div class="slider-container">
                <label for="definition">Definitie:</label>
                <input type="range" id="definition" min="0" max="10" value="0">
                <p>Van zacht en boterig tot solide en gedefinieerd</p>
            </div>
            <div class="slider-container">
                <label for="sustain">Sustain:</label>
                <input type="range" id="sustain" min="0" max="10" value="0">
                <p>De lengte van de sustain</p>
            </div>
        </div>
        <div style="float: left; margin-right: 50px">
            <div class="slider-container">
                <label for="thickness">Dikte:</label>
                <input type="range" id="thickness" min="0" max="7" value="0">
            </div>
            <div class="slider-container">
                <label for="bellWidth">Belbreedte:</label>
                <input type="range" id="bellWidth" min="0" max="5" value="0">
                <p>Natuurlijk volume van de cymbaal</p>
            </div>
            <div class="slider-container">
                <label for="complexity">Complexiteit:</label>
                <input type="range" id="complexity" min="0" max="5" value="0">
                <p>Hoe complex is het boventoonnetwerk van de cymbaal</p>
            </div>
        </div>
    </div>

    <!-- Checkbox container -->
    <div id="checkboxes">
        <div class="checkbox-container">
            <label for="holes">Gaten:</label>
            <input type="checkbox" id="holes">
        </div>
        <br/>
        <div class="checkbox-container">
            <label for="effect">Effectcymbaal:</label>
            <input type="checkbox" id="effect">
        </div>
        <div class="checkbox-container">
            <label for="ride">Ridecymbaal:</label>
            <input type="checkbox" id="ride">
        </div>
        <br/>
    </div>

    <!-- Dropdown for size filter -->
    <div class="dropdown-container">
        <label for="size">Size:</label>
        <select id="size">
            <option value="0">Select Size</option>
            <option value="14">14"</option>
            <option value="15">15"</option>
            <option value="16">16"</option>
            <option value="17">17"</option>
            <option value="18">18"</option>
            <option value="19">19"</option>
            <option value="20">20"</option>
            <option value="21">21"</option>
            <option value="22">22"</option>
            <option value="23">23"</option>
            <option value="24">24"</option>
        </select>
    </div>
    <br/>
    <!-- Filter button -->
    <button id="filterBtn">Apply Filters</button>

    <!-- Results container -->
    <div id="results"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const toggleFiltersBtn = document.getElementById('toggleFiltersBtn');
        const slidersDiv = document.getElementById('sliders');
        const filterBtn = document.getElementById('filterBtn');
        const resultsDiv = document.getElementById('results');

        toggleFiltersBtn.addEventListener('click', () => {
            if (slidersDiv.style.display === 'none') {
                slidersDiv.style.display = 'block';
                toggleFiltersBtn.textContent = 'Hide Filters';
            } else {
                slidersDiv.style.display = 'none';
                toggleFiltersBtn.textContent = 'Show Filters';
            }
        });

        let cymbalData = [];

        fetch('./resources/cymbalsLatest.json')
            .then(response => response.json())
            .then(data => {
                cymbalData = data.cymbals;
                console.log(data.cymbals);
            })
            .catch(error => console.error('Error:', error));

        function getYouTubeEmbedURL(url) {
            let embedURL = "";
            if (url.includes("playlist")) {
                const playlistId = url.split("list=")[1];
                embedURL = `https://www.youtube.com/embed/videoseries?list=${playlistId}`;
            } else {
                const videoId = url.split("v=")[1];
                embedURL = `https://www.youtube.com/embed/${videoId}`;
            }
            return embedURL;
        }

        filterBtn.addEventListener('click', () => {
            // Get filter values from sliders
            const brightness = parseInt(document.getElementById('brightness').value);
            const dryness = parseInt(document.getElementById('dryness').value);
            const definition = parseInt(document.getElementById('definition').value);
            const sustain = parseInt(document.getElementById('sustain').value);
            const thickness = parseInt(document.getElementById('thickness').value);
            const bellWidth = parseInt(document.getElementById('bellWidth').value);
            const complexity = parseInt(document.getElementById('complexity').value);

            const holes = document.getElementById('holes').checked ? "ja" : "nee";
            const effect = document.getElementById('effect').checked ? "ja" : "nee";
            const ride = document.getElementById('ride').checked ? "ja" : "nee";
            const size = document.getElementById('size').value;

            // Prepare filter object
            const filters = {
                brightness,
                dryness,
                definition,
                sustain,
                thickness,
                bellWidth,
                complexity,
                holes,
                effect,
                ride,
                size
            };

            const filteredData = applyFilters(filters, cymbalData);

            // Display filtered data
            resultsDiv.innerHTML = "";
            filteredData.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'result-item';
                const embedURL = getYouTubeEmbedURL(item.Hyperlink);
                itemDiv.innerHTML = `
            <div style="float: left">
            <strong>Name:</strong> ${item.Cymbalname}<br>
            <strong>Type:</strong> ${item.Cymbaltype}<br>
            </div>
            <div style="float: right">
            <strong>Image:</strong> <br/> <img src="./media/${item.Cymbalname}.jpeg" alt="placeholder" width="100">
            </div>
            <br>
            <iframe width="560" height="315" src="${embedURL}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            <p>---------------------</p>
        `;
                resultsDiv.appendChild(itemDiv);
            });
        });

        function applyFilters(filters, cymbalData) {
            const { brightness, dryness, definition, sustain, thickness, bellWidth, complexity, holes, effect, ride, size } = filters;

            return cymbalData.filter(item => {
                const matchesBrightness = brightness === 0 || (item.Brightness !== undefined && item.Brightness >= Math.max(1, brightness - 1) && item.Brightness <= brightness + 1);
                const matchesDryness = dryness === 0 || (item.Dryness !== undefined && item.Dryness >= Math.max(1, dryness - 1) && item.Dryness <= dryness + 1);
                const matchesDefinition = definition === 0 || (item.Definitie !== undefined && item.Definitie >= Math.max(1, definition - 1) && item.Definitie <= definition + 1);
                const matchesSustain = sustain === 0 || (item.Sustain !== undefined && item.Sustain >= Math.max(1, sustain - 1) && item.Sustain <= sustain + 1);
                const matchesThickness = thickness === 0 || (item.Dikte !== undefined && item.Dikte >= Math.max(1, thickness - 1) && item.Dikte <= thickness + 1);
                const matchesBellWidth = bellWidth === 0 || (item.Belbreedte !== undefined && item.Belbreedte >= Math.max(1, bellWidth - 1) && item.Belbreedte <= bellWidth + 1);
                const matchesComplexity = complexity === 0 || (item.Complexiteit !== undefined && item.Complexiteit >= Math.max(1, complexity - 1) && item.Complexiteit <= complexity + 1);
                const matchesHoles = holes === "nee" || (item.Gaten !== undefined && item.Gaten === 'ja');
                const matchesEffect = effect === "nee" || (item.Effectcymbaal !== undefined && item.Effectcymbaal === 'ja');
                const matchesRide = ride === "nee" || (item.Cymbaltype !== undefined && item.Cymbaltype === 'Ride');
                const matchesSize = item.hasOwnProperty(size) || size === "0";

                return matchesBrightness && matchesDryness && matchesDefinition &&
                    matchesSustain && matchesThickness && matchesBellWidth &&
                    matchesComplexity && matchesHoles && matchesEffect && matchesSize && matchesRide;
            });
        }
    });
</script>
</body>
</html>
